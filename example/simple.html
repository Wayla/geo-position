<!DOCTYPE html>
<html>
<head><meta charset=utf-8></head>
<body></body>
<script language=javascript>
;(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){
var getPosition = require('..');

getPosition(console.log.bind(console));
getPosition(console.log.bind(console));
getPosition(console.log.bind(console));
getPosition(console.log.bind(console));
getPosition(console.log.bind(console));

},{"..":2}],2:[function(require,module,exports){
module.exports = getPosition;

function getPosition (opts, fn) {
  if (arguments.length == 1) {
    fn = opts;
    opts = {};
  }

  unlessDefined(opts, {
    timeout: 5000,
    maximumAge: 60000,
    enableHighAccuracy: true
  });

  var once = Once();

  var onposition = once(function (position) {
    if (called) return;
    called = true;
    var ret = position.coords;
    ret.timestamp = position.timestamp;
    fn(null, ret);
  });
  var onerror = once(fn);

  navigator.geolocation.getCurrentPosition(onposition, onerror, opts);
}

function unlessDefined (base, xtend) {
  Object.keys(xtend).forEach(function (key) {
    if (typeof base[key] == 'undefined') base[key] = xtend[key];
  });
}

function Once () {
  var called = false;
  return function (fn) {
    return function () {
      if (called) return;
      called = true;
      fn.apply(this, arguments);
    }
  }
}

},{}]},{},[1])
;</script>
</html>
